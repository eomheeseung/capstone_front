{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.HeartBeat = void 0;\nconst tslib_1 = require(\"tslib\");\nconst events_1 = require(\"events\");\nconst time_1 = require(\"@walletconnect/time\");\nconst types_1 = require(\"./types\");\nconst constants_1 = require(\"./constants\");\nclass HeartBeat extends types_1.IHeartBeat {\n  constructor(opts) {\n    super(opts);\n    this.events = new events_1.EventEmitter();\n    this.interval = constants_1.HEARTBEAT_INTERVAL;\n    this.interval = (opts === null || opts === void 0 ? void 0 : opts.interval) || constants_1.HEARTBEAT_INTERVAL;\n  }\n  static init(opts) {\n    return tslib_1.__awaiter(this, void 0, void 0, function* () {\n      const heartbeat = new HeartBeat(opts);\n      yield heartbeat.init();\n      return heartbeat;\n    });\n  }\n  init() {\n    return tslib_1.__awaiter(this, void 0, void 0, function* () {\n      yield this.initialize();\n    });\n  }\n  stop() {\n    clearInterval(this.intervalRef);\n  }\n  on(event, listener) {\n    this.events.on(event, listener);\n  }\n  once(event, listener) {\n    this.events.once(event, listener);\n  }\n  off(event, listener) {\n    this.events.off(event, listener);\n  }\n  removeListener(event, listener) {\n    this.events.removeListener(event, listener);\n  }\n  initialize() {\n    return tslib_1.__awaiter(this, void 0, void 0, function* () {\n      this.intervalRef = setInterval(() => this.pulse(), time_1.toMiliseconds(this.interval));\n    });\n  }\n  pulse() {\n    this.events.emit(constants_1.HEARTBEAT_EVENTS.pulse);\n  }\n}\nexports.HeartBeat = HeartBeat;","map":{"version":3,"mappings":";;;;;;;AAAA;AACA;AAEA;AAEA;AAEA,MAAaA,SAAU,SAAQC,kBAAU;EAYvCC,YAAYC,IAAuB;IACjC,KAAK,CAACA,IAAI,CAAC;IANN,WAAM,GAAG,IAAIC,qBAAY,EAAE;IAE3B,aAAQ,GAAGC,8BAAkB;IAKlC,IAAI,CAACC,QAAQ,GAAG,KAAI,aAAJH,IAAI,uBAAJA,IAAI,CAAEG,QAAQ,KAAID,8BAAkB;EACtD;EAdA,OAAaE,IAAI,CAACJ,IAAuB;;MACvC,MAAMK,SAAS,GAAG,IAAIR,SAAS,CAACG,IAAI,CAAC;MACrC,MAAMK,SAAS,CAACD,IAAI,EAAE;MACtB,OAAOC,SAAS;IAClB,CAAC;;EAYYD,IAAI;;MACf,MAAM,IAAI,CAACE,UAAU,EAAE;IACzB,CAAC;;EAEMC,IAAI;IACTC,aAAa,CAAC,IAAI,CAACC,WAAW,CAAC;EACjC;EAEOC,EAAE,CAACC,KAAa,EAAEC,QAAa;IACpC,IAAI,CAACC,MAAM,CAACH,EAAE,CAACC,KAAK,EAAEC,QAAQ,CAAC;EACjC;EAEOE,IAAI,CAACH,KAAa,EAAEC,QAAa;IACtC,IAAI,CAACC,MAAM,CAACC,IAAI,CAACH,KAAK,EAAEC,QAAQ,CAAC;EACnC;EAEOG,GAAG,CAACJ,KAAa,EAAEC,QAAa;IACrC,IAAI,CAACC,MAAM,CAACE,GAAG,CAACJ,KAAK,EAAEC,QAAQ,CAAC;EAClC;EAEOI,cAAc,CAACL,KAAa,EAAEC,QAAa;IAChD,IAAI,CAACC,MAAM,CAACG,cAAc,CAACL,KAAK,EAAEC,QAAQ,CAAC;EAC7C;EAIcN,UAAU;;MACtB,IAAI,CAACG,WAAW,GAAGQ,WAAW,CAAC,MAAM,IAAI,CAACC,KAAK,EAAE,EAAEC,oBAAa,CAAC,IAAI,CAAChB,QAAQ,CAAC,CAAC;IAClF,CAAC;;EAEOe,KAAK;IACX,IAAI,CAACL,MAAM,CAACO,IAAI,CAAClB,4BAAgB,CAACgB,KAAK,CAAC;EAC1C;;AAjDFG","names":["HeartBeat","types_1","constructor","opts","events_1","constants_1","interval","init","heartbeat","initialize","stop","clearInterval","intervalRef","on","event","listener","events","once","off","removeListener","setInterval","pulse","time_1","emit","exports"],"sources":["../../src/heartbeat.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script","externalDependencies":[]}