{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/paete/Prototype/nftmusicProtoCopy/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Users/paete/Prototype/nftmusicProtoCopy/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _toConsumableArray from \"C:/Users/paete/Prototype/nftmusicProtoCopy/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _classCallCheck from \"C:/Users/paete/Prototype/nftmusicProtoCopy/client/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"C:/Users/paete/Prototype/nftmusicProtoCopy/client/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport { parsePersonalSign, parseTransactionData, convertArrayBufferToHex, convertHexToArrayBuffer, getClientMeta, payloadId, uuid, formatRpcError, parseWalletConnectUri, convertNumberToHex, isJsonRpcResponseSuccess, isJsonRpcResponseError, isSilentPayload, getLocal, signingMethods, mobileLinkChoiceKey, isMobile, removeLocal } from \"@walletconnect/utils\";\nimport SocketTransport from \"@walletconnect/socket-transport\";\nimport { ERROR_SESSION_CONNECTED, ERROR_SESSION_DISCONNECTED, ERROR_SESSION_REJECTED, ERROR_MISSING_JSON_RPC, ERROR_MISSING_RESULT, ERROR_MISSING_ERROR, ERROR_MISSING_METHOD, ERROR_MISSING_ID, ERROR_INVALID_RESPONSE, ERROR_INVALID_URI, ERROR_MISSING_REQUIRED, ERROR_QRCODE_MODAL_NOT_PROVIDED, ERROR_QRCODE_MODAL_USER_CLOSED } from \"./errors\";\nimport EventManager from \"./events\";\nimport SessionStorage from \"./storage\";\nimport { getBridgeUrl } from \"./url\";\nvar Connector = /*#__PURE__*/function () {\n  function Connector(opts) {\n    _classCallCheck(this, Connector);\n    this.protocol = \"wc\";\n    this.version = 1;\n    this._bridge = \"\";\n    this._key = null;\n    this._clientId = \"\";\n    this._clientMeta = null;\n    this._peerId = \"\";\n    this._peerMeta = null;\n    this._handshakeId = 0;\n    this._handshakeTopic = \"\";\n    this._connected = false;\n    this._accounts = [];\n    this._chainId = 0;\n    this._networkId = 0;\n    this._rpcUrl = \"\";\n    this._eventManager = new EventManager();\n    this._clientMeta = getClientMeta() || opts.connectorOpts.clientMeta || null;\n    this._cryptoLib = opts.cryptoLib;\n    this._sessionStorage = opts.sessionStorage || new SessionStorage(opts.connectorOpts.storageId);\n    this._qrcodeModal = opts.connectorOpts.qrcodeModal;\n    this._qrcodeModalOptions = opts.connectorOpts.qrcodeModalOptions;\n    this._signingMethods = [].concat(_toConsumableArray(signingMethods), _toConsumableArray(opts.connectorOpts.signingMethods || []));\n    if (!opts.connectorOpts.bridge && !opts.connectorOpts.uri && !opts.connectorOpts.session) {\n      throw new Error(ERROR_MISSING_REQUIRED);\n    }\n    if (opts.connectorOpts.bridge) {\n      this.bridge = getBridgeUrl(opts.connectorOpts.bridge);\n    }\n    if (opts.connectorOpts.uri) {\n      this.uri = opts.connectorOpts.uri;\n    }\n    var session = opts.connectorOpts.session || this._getStorageSession();\n    if (session) {\n      this.session = session;\n    }\n    if (this.handshakeId) {\n      this._subscribeToSessionResponse(this.handshakeId, \"Session request rejected\");\n    }\n    this._transport = opts.transport || new SocketTransport({\n      protocol: this.protocol,\n      version: this.version,\n      url: this.bridge,\n      subscriptions: [this.clientId]\n    });\n    this._subscribeToInternalEvents();\n    this._initTransport();\n    if (opts.connectorOpts.uri) {\n      this._subscribeToSessionRequest();\n    }\n    if (opts.pushServerOpts) {\n      this._registerPushServer(opts.pushServerOpts);\n    }\n  }\n  _createClass(Connector, [{\n    key: \"bridge\",\n    get: function get() {\n      return this._bridge;\n    },\n    set: function set(value) {\n      if (!value) {\n        return;\n      }\n      this._bridge = value;\n    }\n  }, {\n    key: \"key\",\n    get: function get() {\n      if (this._key) {\n        var key = convertArrayBufferToHex(this._key, true);\n        return key;\n      }\n      return \"\";\n    },\n    set: function set(value) {\n      if (!value) {\n        return;\n      }\n      var key = convertHexToArrayBuffer(value);\n      this._key = key;\n    }\n  }, {\n    key: \"clientId\",\n    get: function get() {\n      var clientId = this._clientId;\n      if (!clientId) {\n        clientId = this._clientId = uuid();\n      }\n      return this._clientId;\n    },\n    set: function set(value) {\n      if (!value) {\n        return;\n      }\n      this._clientId = value;\n    }\n  }, {\n    key: \"peerId\",\n    get: function get() {\n      return this._peerId;\n    },\n    set: function set(value) {\n      if (!value) {\n        return;\n      }\n      this._peerId = value;\n    }\n  }, {\n    key: \"clientMeta\",\n    get: function get() {\n      var clientMeta = this._clientMeta;\n      if (!clientMeta) {\n        clientMeta = this._clientMeta = getClientMeta();\n      }\n      return clientMeta;\n    },\n    set: function set(value) {}\n  }, {\n    key: \"peerMeta\",\n    get: function get() {\n      var peerMeta = this._peerMeta;\n      return peerMeta;\n    },\n    set: function set(value) {\n      this._peerMeta = value;\n    }\n  }, {\n    key: \"handshakeTopic\",\n    get: function get() {\n      return this._handshakeTopic;\n    },\n    set: function set(value) {\n      if (!value) {\n        return;\n      }\n      this._handshakeTopic = value;\n    }\n  }, {\n    key: \"handshakeId\",\n    get: function get() {\n      return this._handshakeId;\n    },\n    set: function set(value) {\n      if (!value) {\n        return;\n      }\n      this._handshakeId = value;\n    }\n  }, {\n    key: \"uri\",\n    get: function get() {\n      var _uri = this._formatUri();\n      return _uri;\n    },\n    set: function set(value) {\n      if (!value) {\n        return;\n      }\n      var _this$_parseUri = this._parseUri(value),\n        handshakeTopic = _this$_parseUri.handshakeTopic,\n        bridge = _this$_parseUri.bridge,\n        key = _this$_parseUri.key;\n      this.handshakeTopic = handshakeTopic;\n      this.bridge = bridge;\n      this.key = key;\n    }\n  }, {\n    key: \"chainId\",\n    get: function get() {\n      var chainId = this._chainId;\n      return chainId;\n    },\n    set: function set(value) {\n      this._chainId = value;\n    }\n  }, {\n    key: \"networkId\",\n    get: function get() {\n      var networkId = this._networkId;\n      return networkId;\n    },\n    set: function set(value) {\n      this._networkId = value;\n    }\n  }, {\n    key: \"accounts\",\n    get: function get() {\n      var accounts = this._accounts;\n      return accounts;\n    },\n    set: function set(value) {\n      this._accounts = value;\n    }\n  }, {\n    key: \"rpcUrl\",\n    get: function get() {\n      var rpcUrl = this._rpcUrl;\n      return rpcUrl;\n    },\n    set: function set(value) {\n      this._rpcUrl = value;\n    }\n  }, {\n    key: \"connected\",\n    get: function get() {\n      return this._connected;\n    },\n    set: function set(value) {}\n  }, {\n    key: \"pending\",\n    get: function get() {\n      return !!this._handshakeTopic;\n    },\n    set: function set(value) {}\n  }, {\n    key: \"session\",\n    get: function get() {\n      return {\n        connected: this.connected,\n        accounts: this.accounts,\n        chainId: this.chainId,\n        bridge: this.bridge,\n        key: this.key,\n        clientId: this.clientId,\n        clientMeta: this.clientMeta,\n        peerId: this.peerId,\n        peerMeta: this.peerMeta,\n        handshakeId: this.handshakeId,\n        handshakeTopic: this.handshakeTopic\n      };\n    },\n    set: function set(value) {\n      if (!value) {\n        return;\n      }\n      this._connected = value.connected;\n      this.accounts = value.accounts;\n      this.chainId = value.chainId;\n      this.bridge = value.bridge;\n      this.key = value.key;\n      this.clientId = value.clientId;\n      this.clientMeta = value.clientMeta;\n      this.peerId = value.peerId;\n      this.peerMeta = value.peerMeta;\n      this.handshakeId = value.handshakeId;\n      this.handshakeTopic = value.handshakeTopic;\n    }\n  }, {\n    key: \"on\",\n    value: function on(event, callback) {\n      var eventEmitter = {\n        event: event,\n        callback: callback\n      };\n      this._eventManager.subscribe(eventEmitter);\n    }\n  }, {\n    key: \"off\",\n    value: function off(event) {\n      this._eventManager.unsubscribe(event);\n    }\n  }, {\n    key: \"createInstantRequest\",\n    value: function () {\n      var _createInstantRequest = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(instantRequest) {\n        var _this = this;\n        var request, endInstantRequest, result;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return this._generateKey();\n            case 2:\n              this._key = _context.sent;\n              request = this._formatRequest({\n                method: \"wc_instantRequest\",\n                params: [{\n                  peerId: this.clientId,\n                  peerMeta: this.clientMeta,\n                  request: this._formatRequest(instantRequest)\n                }]\n              });\n              this.handshakeId = request.id;\n              this.handshakeTopic = uuid();\n              this._eventManager.trigger({\n                event: \"display_uri\",\n                params: [this.uri]\n              });\n              this.on(\"modal_closed\", function () {\n                throw new Error(ERROR_QRCODE_MODAL_USER_CLOSED);\n              });\n              endInstantRequest = function endInstantRequest() {\n                _this.killSession();\n              };\n              _context.prev = 9;\n              _context.next = 12;\n              return this._sendCallRequest(request);\n            case 12:\n              result = _context.sent;\n              if (result) {\n                endInstantRequest();\n              }\n              return _context.abrupt(\"return\", result);\n            case 17:\n              _context.prev = 17;\n              _context.t0 = _context[\"catch\"](9);\n              endInstantRequest();\n              throw _context.t0;\n            case 21:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, this, [[9, 17]]);\n      }));\n      function createInstantRequest(_x) {\n        return _createInstantRequest.apply(this, arguments);\n      }\n      return createInstantRequest;\n    }()\n  }, {\n    key: \"connect\",\n    value: function () {\n      var _connect = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3(opts) {\n        var _this2 = this;\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) switch (_context3.prev = _context3.next) {\n            case 0:\n              if (this._qrcodeModal) {\n                _context3.next = 2;\n                break;\n              }\n              throw new Error(ERROR_QRCODE_MODAL_NOT_PROVIDED);\n            case 2:\n              if (!this.connected) {\n                _context3.next = 4;\n                break;\n              }\n              return _context3.abrupt(\"return\", {\n                chainId: this.chainId,\n                accounts: this.accounts\n              });\n            case 4:\n              _context3.next = 6;\n              return this.createSession(opts);\n            case 6:\n              return _context3.abrupt(\"return\", new Promise( /*#__PURE__*/function () {\n                var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(resolve, reject) {\n                  return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n                    while (1) switch (_context2.prev = _context2.next) {\n                      case 0:\n                        _this2.on(\"modal_closed\", function () {\n                          return reject(new Error(ERROR_QRCODE_MODAL_USER_CLOSED));\n                        });\n                        _this2.on(\"connect\", function (error, payload) {\n                          if (error) {\n                            return reject(error);\n                          }\n                          resolve(payload.params[0]);\n                        });\n                      case 2:\n                      case \"end\":\n                        return _context2.stop();\n                    }\n                  }, _callee2);\n                }));\n                return function (_x3, _x4) {\n                  return _ref.apply(this, arguments);\n                };\n              }()));\n            case 7:\n            case \"end\":\n              return _context3.stop();\n          }\n        }, _callee3, this);\n      }));\n      function connect(_x2) {\n        return _connect.apply(this, arguments);\n      }\n      return connect;\n    }()\n  }, {\n    key: \"createSession\",\n    value: function () {\n      var _createSession = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4(opts) {\n        var request;\n        return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n          while (1) switch (_context4.prev = _context4.next) {\n            case 0:\n              if (!this._connected) {\n                _context4.next = 2;\n                break;\n              }\n              throw new Error(ERROR_SESSION_CONNECTED);\n            case 2:\n              if (!this.pending) {\n                _context4.next = 4;\n                break;\n              }\n              return _context4.abrupt(\"return\");\n            case 4:\n              _context4.next = 6;\n              return this._generateKey();\n            case 6:\n              this._key = _context4.sent;\n              request = this._formatRequest({\n                method: \"wc_sessionRequest\",\n                params: [{\n                  peerId: this.clientId,\n                  peerMeta: this.clientMeta,\n                  chainId: opts && opts.chainId ? opts.chainId : null\n                }]\n              });\n              this.handshakeId = request.id;\n              this.handshakeTopic = uuid();\n              this._sendSessionRequest(request, \"Session update rejected\", {\n                topic: this.handshakeTopic\n              });\n              this._eventManager.trigger({\n                event: \"display_uri\",\n                params: [this.uri]\n              });\n            case 12:\n            case \"end\":\n              return _context4.stop();\n          }\n        }, _callee4, this);\n      }));\n      function createSession(_x5) {\n        return _createSession.apply(this, arguments);\n      }\n      return createSession;\n    }()\n  }, {\n    key: \"approveSession\",\n    value: function approveSession(sessionStatus) {\n      if (this._connected) {\n        throw new Error(ERROR_SESSION_CONNECTED);\n      }\n      this.chainId = sessionStatus.chainId;\n      this.accounts = sessionStatus.accounts;\n      this.networkId = sessionStatus.networkId || 0;\n      this.rpcUrl = sessionStatus.rpcUrl || \"\";\n      var sessionParams = {\n        approved: true,\n        chainId: this.chainId,\n        networkId: this.networkId,\n        accounts: this.accounts,\n        rpcUrl: this.rpcUrl,\n        peerId: this.clientId,\n        peerMeta: this.clientMeta\n      };\n      var response = {\n        id: this.handshakeId,\n        jsonrpc: \"2.0\",\n        result: sessionParams\n      };\n      this._sendResponse(response);\n      this._connected = true;\n      this._setStorageSession();\n      this._eventManager.trigger({\n        event: \"connect\",\n        params: [{\n          peerId: this.peerId,\n          peerMeta: this.peerMeta,\n          chainId: this.chainId,\n          accounts: this.accounts\n        }]\n      });\n    }\n  }, {\n    key: \"rejectSession\",\n    value: function rejectSession(sessionError) {\n      if (this._connected) {\n        throw new Error(ERROR_SESSION_CONNECTED);\n      }\n      var message = sessionError && sessionError.message ? sessionError.message : ERROR_SESSION_REJECTED;\n      var response = this._formatResponse({\n        id: this.handshakeId,\n        error: {\n          message: message\n        }\n      });\n      this._sendResponse(response);\n      this._connected = false;\n      this._eventManager.trigger({\n        event: \"disconnect\",\n        params: [{\n          message: message\n        }]\n      });\n      this._removeStorageSession();\n    }\n  }, {\n    key: \"updateSession\",\n    value: function updateSession(sessionStatus) {\n      if (!this._connected) {\n        throw new Error(ERROR_SESSION_DISCONNECTED);\n      }\n      this.chainId = sessionStatus.chainId;\n      this.accounts = sessionStatus.accounts;\n      this.networkId = sessionStatus.networkId || 0;\n      this.rpcUrl = sessionStatus.rpcUrl || \"\";\n      var sessionParams = {\n        approved: true,\n        chainId: this.chainId,\n        networkId: this.networkId,\n        accounts: this.accounts,\n        rpcUrl: this.rpcUrl\n      };\n      var request = this._formatRequest({\n        method: \"wc_sessionUpdate\",\n        params: [sessionParams]\n      });\n      this._sendSessionRequest(request, \"Session update rejected\");\n      this._eventManager.trigger({\n        event: \"session_update\",\n        params: [{\n          chainId: this.chainId,\n          accounts: this.accounts\n        }]\n      });\n      this._manageStorageSession();\n    }\n  }, {\n    key: \"killSession\",\n    value: function () {\n      var _killSession = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee5(sessionError) {\n        var message, sessionParams, request;\n        return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n          while (1) switch (_context5.prev = _context5.next) {\n            case 0:\n              message = sessionError ? sessionError.message : \"Session Disconnected\";\n              sessionParams = {\n                approved: false,\n                chainId: null,\n                networkId: null,\n                accounts: null\n              };\n              request = this._formatRequest({\n                method: \"wc_sessionUpdate\",\n                params: [sessionParams]\n              });\n              _context5.next = 5;\n              return this._sendRequest(request);\n            case 5:\n              this._handleSessionDisconnect(message);\n            case 6:\n            case \"end\":\n              return _context5.stop();\n          }\n        }, _callee5, this);\n      }));\n      function killSession(_x6) {\n        return _killSession.apply(this, arguments);\n      }\n      return killSession;\n    }()\n  }, {\n    key: \"sendTransaction\",\n    value: function () {\n      var _sendTransaction = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee6(tx) {\n        var parsedTx, request, result;\n        return _regeneratorRuntime().wrap(function _callee6$(_context6) {\n          while (1) switch (_context6.prev = _context6.next) {\n            case 0:\n              if (this._connected) {\n                _context6.next = 2;\n                break;\n              }\n              throw new Error(ERROR_SESSION_DISCONNECTED);\n            case 2:\n              parsedTx = parseTransactionData(tx);\n              request = this._formatRequest({\n                method: \"eth_sendTransaction\",\n                params: [parsedTx]\n              });\n              _context6.next = 6;\n              return this._sendCallRequest(request);\n            case 6:\n              result = _context6.sent;\n              return _context6.abrupt(\"return\", result);\n            case 8:\n            case \"end\":\n              return _context6.stop();\n          }\n        }, _callee6, this);\n      }));\n      function sendTransaction(_x7) {\n        return _sendTransaction.apply(this, arguments);\n      }\n      return sendTransaction;\n    }()\n  }, {\n    key: \"signTransaction\",\n    value: function () {\n      var _signTransaction = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee7(tx) {\n        var parsedTx, request, result;\n        return _regeneratorRuntime().wrap(function _callee7$(_context7) {\n          while (1) switch (_context7.prev = _context7.next) {\n            case 0:\n              if (this._connected) {\n                _context7.next = 2;\n                break;\n              }\n              throw new Error(ERROR_SESSION_DISCONNECTED);\n            case 2:\n              parsedTx = parseTransactionData(tx);\n              request = this._formatRequest({\n                method: \"eth_signTransaction\",\n                params: [parsedTx]\n              });\n              _context7.next = 6;\n              return this._sendCallRequest(request);\n            case 6:\n              result = _context7.sent;\n              return _context7.abrupt(\"return\", result);\n            case 8:\n            case \"end\":\n              return _context7.stop();\n          }\n        }, _callee7, this);\n      }));\n      function signTransaction(_x8) {\n        return _signTransaction.apply(this, arguments);\n      }\n      return signTransaction;\n    }()\n  }, {\n    key: \"signMessage\",\n    value: function () {\n      var _signMessage = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee8(params) {\n        var request, result;\n        return _regeneratorRuntime().wrap(function _callee8$(_context8) {\n          while (1) switch (_context8.prev = _context8.next) {\n            case 0:\n              if (this._connected) {\n                _context8.next = 2;\n                break;\n              }\n              throw new Error(ERROR_SESSION_DISCONNECTED);\n            case 2:\n              request = this._formatRequest({\n                method: \"eth_sign\",\n                params: params\n              });\n              _context8.next = 5;\n              return this._sendCallRequest(request);\n            case 5:\n              result = _context8.sent;\n              return _context8.abrupt(\"return\", result);\n            case 7:\n            case \"end\":\n              return _context8.stop();\n          }\n        }, _callee8, this);\n      }));\n      function signMessage(_x9) {\n        return _signMessage.apply(this, arguments);\n      }\n      return signMessage;\n    }()\n  }, {\n    key: \"signPersonalMessage\",\n    value: function () {\n      var _signPersonalMessage = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee9(params) {\n        var request, result;\n        return _regeneratorRuntime().wrap(function _callee9$(_context9) {\n          while (1) switch (_context9.prev = _context9.next) {\n            case 0:\n              if (this._connected) {\n                _context9.next = 2;\n                break;\n              }\n              throw new Error(ERROR_SESSION_DISCONNECTED);\n            case 2:\n              params = parsePersonalSign(params);\n              request = this._formatRequest({\n                method: \"personal_sign\",\n                params: params\n              });\n              _context9.next = 6;\n              return this._sendCallRequest(request);\n            case 6:\n              result = _context9.sent;\n              return _context9.abrupt(\"return\", result);\n            case 8:\n            case \"end\":\n              return _context9.stop();\n          }\n        }, _callee9, this);\n      }));\n      function signPersonalMessage(_x10) {\n        return _signPersonalMessage.apply(this, arguments);\n      }\n      return signPersonalMessage;\n    }()\n  }, {\n    key: \"signTypedData\",\n    value: function () {\n      var _signTypedData = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee10(params) {\n        var request, result;\n        return _regeneratorRuntime().wrap(function _callee10$(_context10) {\n          while (1) switch (_context10.prev = _context10.next) {\n            case 0:\n              if (this._connected) {\n                _context10.next = 2;\n                break;\n              }\n              throw new Error(ERROR_SESSION_DISCONNECTED);\n            case 2:\n              request = this._formatRequest({\n                method: \"eth_signTypedData\",\n                params: params\n              });\n              _context10.next = 5;\n              return this._sendCallRequest(request);\n            case 5:\n              result = _context10.sent;\n              return _context10.abrupt(\"return\", result);\n            case 7:\n            case \"end\":\n              return _context10.stop();\n          }\n        }, _callee10, this);\n      }));\n      function signTypedData(_x11) {\n        return _signTypedData.apply(this, arguments);\n      }\n      return signTypedData;\n    }()\n  }, {\n    key: \"updateChain\",\n    value: function () {\n      var _updateChain = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee11(chainParams) {\n        var request, result;\n        return _regeneratorRuntime().wrap(function _callee11$(_context11) {\n          while (1) switch (_context11.prev = _context11.next) {\n            case 0:\n              if (this._connected) {\n                _context11.next = 2;\n                break;\n              }\n              throw new Error(\"Session currently disconnected\");\n            case 2:\n              request = this._formatRequest({\n                method: \"wallet_updateChain\",\n                params: [chainParams]\n              });\n              _context11.next = 5;\n              return this._sendCallRequest(request);\n            case 5:\n              result = _context11.sent;\n              return _context11.abrupt(\"return\", result);\n            case 7:\n            case \"end\":\n              return _context11.stop();\n          }\n        }, _callee11, this);\n      }));\n      function updateChain(_x12) {\n        return _updateChain.apply(this, arguments);\n      }\n      return updateChain;\n    }()\n  }, {\n    key: \"unsafeSend\",\n    value: function unsafeSend(request, options) {\n      var _this3 = this;\n      this._sendRequest(request, options);\n      this._eventManager.trigger({\n        event: \"call_request_sent\",\n        params: [{\n          request: request,\n          options: options\n        }]\n      });\n      return new Promise(function (resolve, reject) {\n        _this3._subscribeToResponse(request.id, function (error, payload) {\n          if (error) {\n            reject(error);\n            return;\n          }\n          if (!payload) {\n            throw new Error(ERROR_MISSING_JSON_RPC);\n          }\n          resolve(payload);\n        });\n      });\n    }\n  }, {\n    key: \"sendCustomRequest\",\n    value: function () {\n      var _sendCustomRequest = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee12(request, options) {\n        var formattedRequest, result;\n        return _regeneratorRuntime().wrap(function _callee12$(_context12) {\n          while (1) switch (_context12.prev = _context12.next) {\n            case 0:\n              if (this._connected) {\n                _context12.next = 2;\n                break;\n              }\n              throw new Error(ERROR_SESSION_DISCONNECTED);\n            case 2:\n              _context12.t0 = request.method;\n              _context12.next = _context12.t0 === \"eth_accounts\" ? 5 : _context12.t0 === \"eth_chainId\" ? 6 : _context12.t0 === \"eth_sendTransaction\" ? 7 : _context12.t0 === \"eth_signTransaction\" ? 7 : _context12.t0 === \"personal_sign\" ? 9 : 11;\n              break;\n            case 5:\n              return _context12.abrupt(\"return\", this.accounts);\n            case 6:\n              return _context12.abrupt(\"return\", convertNumberToHex(this.chainId));\n            case 7:\n              if (request.params) {\n                request.params[0] = parseTransactionData(request.params[0]);\n              }\n              return _context12.abrupt(\"break\", 12);\n            case 9:\n              if (request.params) {\n                request.params = parsePersonalSign(request.params);\n              }\n              return _context12.abrupt(\"break\", 12);\n            case 11:\n              return _context12.abrupt(\"break\", 12);\n            case 12:\n              formattedRequest = this._formatRequest(request);\n              _context12.next = 15;\n              return this._sendCallRequest(formattedRequest, options);\n            case 15:\n              result = _context12.sent;\n              return _context12.abrupt(\"return\", result);\n            case 17:\n            case \"end\":\n              return _context12.stop();\n          }\n        }, _callee12, this);\n      }));\n      function sendCustomRequest(_x13, _x14) {\n        return _sendCustomRequest.apply(this, arguments);\n      }\n      return sendCustomRequest;\n    }()\n  }, {\n    key: \"approveRequest\",\n    value: function approveRequest(response) {\n      if (isJsonRpcResponseSuccess(response)) {\n        var formattedResponse = this._formatResponse(response);\n        this._sendResponse(formattedResponse);\n      } else {\n        throw new Error(ERROR_MISSING_RESULT);\n      }\n    }\n  }, {\n    key: \"rejectRequest\",\n    value: function rejectRequest(response) {\n      if (isJsonRpcResponseError(response)) {\n        var formattedResponse = this._formatResponse(response);\n        this._sendResponse(formattedResponse);\n      } else {\n        throw new Error(ERROR_MISSING_ERROR);\n      }\n    }\n  }, {\n    key: \"transportClose\",\n    value: function transportClose() {\n      this._transport.close();\n    }\n  }, {\n    key: \"_sendRequest\",\n    value: function () {\n      var _sendRequest2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee13(request, options) {\n        var callRequest, encryptionPayload, topic, payload, silent;\n        return _regeneratorRuntime().wrap(function _callee13$(_context13) {\n          while (1) switch (_context13.prev = _context13.next) {\n            case 0:\n              callRequest = this._formatRequest(request);\n              _context13.next = 3;\n              return this._encrypt(callRequest);\n            case 3:\n              encryptionPayload = _context13.sent;\n              topic = typeof (options === null || options === void 0 ? void 0 : options.topic) !== \"undefined\" ? options.topic : this.peerId;\n              payload = JSON.stringify(encryptionPayload);\n              silent = typeof (options === null || options === void 0 ? void 0 : options.forcePushNotification) !== \"undefined\" ? !options.forcePushNotification : isSilentPayload(callRequest);\n              this._transport.send(payload, topic, silent);\n            case 8:\n            case \"end\":\n              return _context13.stop();\n          }\n        }, _callee13, this);\n      }));\n      function _sendRequest(_x15, _x16) {\n        return _sendRequest2.apply(this, arguments);\n      }\n      return _sendRequest;\n    }()\n  }, {\n    key: \"_sendResponse\",\n    value: function () {\n      var _sendResponse2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee14(response) {\n        var encryptionPayload, topic, payload, silent;\n        return _regeneratorRuntime().wrap(function _callee14$(_context14) {\n          while (1) switch (_context14.prev = _context14.next) {\n            case 0:\n              _context14.next = 2;\n              return this._encrypt(response);\n            case 2:\n              encryptionPayload = _context14.sent;\n              topic = this.peerId;\n              payload = JSON.stringify(encryptionPayload);\n              silent = true;\n              this._transport.send(payload, topic, silent);\n            case 7:\n            case \"end\":\n              return _context14.stop();\n          }\n        }, _callee14, this);\n      }));\n      function _sendResponse(_x17) {\n        return _sendResponse2.apply(this, arguments);\n      }\n      return _sendResponse;\n    }()\n  }, {\n    key: \"_sendSessionRequest\",\n    value: function () {\n      var _sendSessionRequest2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee15(request, errorMsg, options) {\n        return _regeneratorRuntime().wrap(function _callee15$(_context15) {\n          while (1) switch (_context15.prev = _context15.next) {\n            case 0:\n              this._sendRequest(request, options);\n              this._subscribeToSessionResponse(request.id, errorMsg);\n            case 2:\n            case \"end\":\n              return _context15.stop();\n          }\n        }, _callee15, this);\n      }));\n      function _sendSessionRequest(_x18, _x19, _x20) {\n        return _sendSessionRequest2.apply(this, arguments);\n      }\n      return _sendSessionRequest;\n    }()\n  }, {\n    key: \"_sendCallRequest\",\n    value: function _sendCallRequest(request, options) {\n      this._sendRequest(request, options);\n      this._eventManager.trigger({\n        event: \"call_request_sent\",\n        params: [{\n          request: request,\n          options: options\n        }]\n      });\n      return this._subscribeToCallResponse(request.id);\n    }\n  }, {\n    key: \"_formatRequest\",\n    value: function _formatRequest(request) {\n      if (typeof request.method === \"undefined\") {\n        throw new Error(ERROR_MISSING_METHOD);\n      }\n      var formattedRequest = {\n        id: typeof request.id === \"undefined\" ? payloadId() : request.id,\n        jsonrpc: \"2.0\",\n        method: request.method,\n        params: typeof request.params === \"undefined\" ? [] : request.params\n      };\n      return formattedRequest;\n    }\n  }, {\n    key: \"_formatResponse\",\n    value: function _formatResponse(response) {\n      if (typeof response.id === \"undefined\") {\n        throw new Error(ERROR_MISSING_ID);\n      }\n      var baseResponse = {\n        id: response.id,\n        jsonrpc: \"2.0\"\n      };\n      if (isJsonRpcResponseError(response)) {\n        var error = formatRpcError(response.error);\n        var errorResponse = Object.assign(Object.assign(Object.assign({}, baseResponse), response), {\n          error: error\n        });\n        return errorResponse;\n      } else if (isJsonRpcResponseSuccess(response)) {\n        var successResponse = Object.assign(Object.assign({}, baseResponse), response);\n        return successResponse;\n      }\n      throw new Error(ERROR_INVALID_RESPONSE);\n    }\n  }, {\n    key: \"_handleSessionDisconnect\",\n    value: function _handleSessionDisconnect(errorMsg) {\n      var message = errorMsg || \"Session Disconnected\";\n      if (!this._connected) {\n        if (this._qrcodeModal) {\n          this._qrcodeModal.close();\n        }\n        removeLocal(mobileLinkChoiceKey);\n      }\n      if (this._connected) {\n        this._connected = false;\n      }\n      if (this._handshakeId) {\n        this._handshakeId = 0;\n      }\n      if (this._handshakeTopic) {\n        this._handshakeTopic = \"\";\n      }\n      if (this._peerId) {\n        this._peerId = \"\";\n      }\n      this._eventManager.trigger({\n        event: \"disconnect\",\n        params: [{\n          message: message\n        }]\n      });\n      this._removeStorageSession();\n      this.transportClose();\n    }\n  }, {\n    key: \"_handleSessionResponse\",\n    value: function _handleSessionResponse(errorMsg, sessionParams) {\n      if (sessionParams) {\n        if (sessionParams.approved) {\n          if (!this._connected) {\n            this._connected = true;\n            if (sessionParams.chainId) {\n              this.chainId = sessionParams.chainId;\n            }\n            if (sessionParams.accounts) {\n              this.accounts = sessionParams.accounts;\n            }\n            if (sessionParams.peerId && !this.peerId) {\n              this.peerId = sessionParams.peerId;\n            }\n            if (sessionParams.peerMeta && !this.peerMeta) {\n              this.peerMeta = sessionParams.peerMeta;\n            }\n            this._eventManager.trigger({\n              event: \"connect\",\n              params: [{\n                peerId: this.peerId,\n                peerMeta: this.peerMeta,\n                chainId: this.chainId,\n                accounts: this.accounts\n              }]\n            });\n          } else {\n            if (sessionParams.chainId) {\n              this.chainId = sessionParams.chainId;\n            }\n            if (sessionParams.accounts) {\n              this.accounts = sessionParams.accounts;\n            }\n            this._eventManager.trigger({\n              event: \"session_update\",\n              params: [{\n                chainId: this.chainId,\n                accounts: this.accounts\n              }]\n            });\n          }\n          this._manageStorageSession();\n        } else {\n          this._handleSessionDisconnect(errorMsg);\n        }\n      } else {\n        this._handleSessionDisconnect(errorMsg);\n      }\n    }\n  }, {\n    key: \"_handleIncomingMessages\",\n    value: function () {\n      var _handleIncomingMessages2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee16(socketMessage) {\n        var activeTopics, encryptionPayload, payload;\n        return _regeneratorRuntime().wrap(function _callee16$(_context16) {\n          while (1) switch (_context16.prev = _context16.next) {\n            case 0:\n              activeTopics = [this.clientId, this.handshakeTopic];\n              if (activeTopics.includes(socketMessage.topic)) {\n                _context16.next = 3;\n                break;\n              }\n              return _context16.abrupt(\"return\");\n            case 3:\n              _context16.prev = 3;\n              encryptionPayload = JSON.parse(socketMessage.payload);\n              _context16.next = 10;\n              break;\n            case 7:\n              _context16.prev = 7;\n              _context16.t0 = _context16[\"catch\"](3);\n              return _context16.abrupt(\"return\");\n            case 10:\n              _context16.next = 12;\n              return this._decrypt(encryptionPayload);\n            case 12:\n              payload = _context16.sent;\n              if (payload) {\n                this._eventManager.trigger(payload);\n              }\n            case 14:\n            case \"end\":\n              return _context16.stop();\n          }\n        }, _callee16, this, [[3, 7]]);\n      }));\n      function _handleIncomingMessages(_x21) {\n        return _handleIncomingMessages2.apply(this, arguments);\n      }\n      return _handleIncomingMessages;\n    }()\n  }, {\n    key: \"_subscribeToSessionRequest\",\n    value: function _subscribeToSessionRequest() {\n      this._transport.subscribe(this.handshakeTopic);\n    }\n  }, {\n    key: \"_subscribeToResponse\",\n    value: function _subscribeToResponse(id, callback) {\n      this.on(\"response:\".concat(id), callback);\n    }\n  }, {\n    key: \"_subscribeToSessionResponse\",\n    value: function _subscribeToSessionResponse(id, errorMsg) {\n      var _this4 = this;\n      this._subscribeToResponse(id, function (error, payload) {\n        if (error) {\n          _this4._handleSessionResponse(error.message);\n          return;\n        }\n        if (isJsonRpcResponseSuccess(payload)) {\n          _this4._handleSessionResponse(errorMsg, payload.result);\n        } else if (payload.error && payload.error.message) {\n          _this4._handleSessionResponse(payload.error.message);\n        } else {\n          _this4._handleSessionResponse(errorMsg);\n        }\n      });\n    }\n  }, {\n    key: \"_subscribeToCallResponse\",\n    value: function _subscribeToCallResponse(id) {\n      var _this5 = this;\n      return new Promise(function (resolve, reject) {\n        _this5._subscribeToResponse(id, function (error, payload) {\n          if (error) {\n            reject(error);\n            return;\n          }\n          if (isJsonRpcResponseSuccess(payload)) {\n            resolve(payload.result);\n          } else if (payload.error && payload.error.message) {\n            reject(payload.error);\n          } else {\n            reject(new Error(ERROR_INVALID_RESPONSE));\n          }\n        });\n      });\n    }\n  }, {\n    key: \"_subscribeToInternalEvents\",\n    value: function _subscribeToInternalEvents() {\n      var _this6 = this;\n      this.on(\"display_uri\", function () {\n        if (_this6._qrcodeModal) {\n          _this6._qrcodeModal.open(_this6.uri, function () {\n            _this6._eventManager.trigger({\n              event: \"modal_closed\",\n              params: []\n            });\n          }, _this6._qrcodeModalOptions);\n        }\n      });\n      this.on(\"connect\", function () {\n        if (_this6._qrcodeModal) {\n          _this6._qrcodeModal.close();\n        }\n      });\n      this.on(\"call_request_sent\", function (error, payload) {\n        var request = payload.params[0].request;\n        if (isMobile() && _this6._signingMethods.includes(request.method)) {\n          var mobileLinkUrl = getLocal(mobileLinkChoiceKey);\n          if (mobileLinkUrl) {\n            window.location.href = mobileLinkUrl.href;\n          }\n        }\n      });\n      this.on(\"wc_sessionRequest\", function (error, payload) {\n        if (error) {\n          _this6._eventManager.trigger({\n            event: \"error\",\n            params: [{\n              code: \"SESSION_REQUEST_ERROR\",\n              message: error.toString()\n            }]\n          });\n        }\n        _this6.handshakeId = payload.id;\n        _this6.peerId = payload.params[0].peerId;\n        _this6.peerMeta = payload.params[0].peerMeta;\n        var internalPayload = Object.assign(Object.assign({}, payload), {\n          method: \"session_request\"\n        });\n        _this6._eventManager.trigger(internalPayload);\n      });\n      this.on(\"wc_sessionUpdate\", function (error, payload) {\n        if (error) {\n          _this6._handleSessionResponse(error.message);\n        }\n        _this6._handleSessionResponse(\"Session disconnected\", payload.params[0]);\n      });\n    }\n  }, {\n    key: \"_initTransport\",\n    value: function _initTransport() {\n      var _this7 = this;\n      this._transport.on(\"message\", function (socketMessage) {\n        return _this7._handleIncomingMessages(socketMessage);\n      });\n      this._transport.on(\"open\", function () {\n        return _this7._eventManager.trigger({\n          event: \"transport_open\",\n          params: []\n        });\n      });\n      this._transport.on(\"close\", function () {\n        return _this7._eventManager.trigger({\n          event: \"transport_close\",\n          params: []\n        });\n      });\n      this._transport.on(\"error\", function () {\n        return _this7._eventManager.trigger({\n          event: \"transport_error\",\n          params: [\"Websocket connection failed\"]\n        });\n      });\n      this._transport.open();\n    }\n  }, {\n    key: \"_formatUri\",\n    value: function _formatUri() {\n      var protocol = this.protocol;\n      var handshakeTopic = this.handshakeTopic;\n      var version = this.version;\n      var bridge = encodeURIComponent(this.bridge);\n      var key = this.key;\n      var uri = \"\".concat(protocol, \":\").concat(handshakeTopic, \"@\").concat(version, \"?bridge=\").concat(bridge, \"&key=\").concat(key);\n      return uri;\n    }\n  }, {\n    key: \"_parseUri\",\n    value: function _parseUri(uri) {\n      var result = parseWalletConnectUri(uri);\n      if (result.protocol === this.protocol) {\n        if (!result.handshakeTopic) {\n          throw Error(\"Invalid or missing handshakeTopic parameter value\");\n        }\n        var handshakeTopic = result.handshakeTopic;\n        if (!result.bridge) {\n          throw Error(\"Invalid or missing bridge url parameter value\");\n        }\n        var bridge = decodeURIComponent(result.bridge);\n        if (!result.key) {\n          throw Error(\"Invalid or missing key parameter value\");\n        }\n        var key = result.key;\n        return {\n          handshakeTopic: handshakeTopic,\n          bridge: bridge,\n          key: key\n        };\n      } else {\n        throw new Error(ERROR_INVALID_URI);\n      }\n    }\n  }, {\n    key: \"_generateKey\",\n    value: function () {\n      var _generateKey2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee17() {\n        var result;\n        return _regeneratorRuntime().wrap(function _callee17$(_context17) {\n          while (1) switch (_context17.prev = _context17.next) {\n            case 0:\n              if (!this._cryptoLib) {\n                _context17.next = 5;\n                break;\n              }\n              _context17.next = 3;\n              return this._cryptoLib.generateKey();\n            case 3:\n              result = _context17.sent;\n              return _context17.abrupt(\"return\", result);\n            case 5:\n              return _context17.abrupt(\"return\", null);\n            case 6:\n            case \"end\":\n              return _context17.stop();\n          }\n        }, _callee17, this);\n      }));\n      function _generateKey() {\n        return _generateKey2.apply(this, arguments);\n      }\n      return _generateKey;\n    }()\n  }, {\n    key: \"_encrypt\",\n    value: function () {\n      var _encrypt2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee18(data) {\n        var key, result;\n        return _regeneratorRuntime().wrap(function _callee18$(_context18) {\n          while (1) switch (_context18.prev = _context18.next) {\n            case 0:\n              key = this._key;\n              if (!(this._cryptoLib && key)) {\n                _context18.next = 6;\n                break;\n              }\n              _context18.next = 4;\n              return this._cryptoLib.encrypt(data, key);\n            case 4:\n              result = _context18.sent;\n              return _context18.abrupt(\"return\", result);\n            case 6:\n              return _context18.abrupt(\"return\", null);\n            case 7:\n            case \"end\":\n              return _context18.stop();\n          }\n        }, _callee18, this);\n      }));\n      function _encrypt(_x22) {\n        return _encrypt2.apply(this, arguments);\n      }\n      return _encrypt;\n    }()\n  }, {\n    key: \"_decrypt\",\n    value: function () {\n      var _decrypt2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee19(payload) {\n        var key, result;\n        return _regeneratorRuntime().wrap(function _callee19$(_context19) {\n          while (1) switch (_context19.prev = _context19.next) {\n            case 0:\n              key = this._key;\n              if (!(this._cryptoLib && key)) {\n                _context19.next = 6;\n                break;\n              }\n              _context19.next = 4;\n              return this._cryptoLib.decrypt(payload, key);\n            case 4:\n              result = _context19.sent;\n              return _context19.abrupt(\"return\", result);\n            case 6:\n              return _context19.abrupt(\"return\", null);\n            case 7:\n            case \"end\":\n              return _context19.stop();\n          }\n        }, _callee19, this);\n      }));\n      function _decrypt(_x23) {\n        return _decrypt2.apply(this, arguments);\n      }\n      return _decrypt;\n    }()\n  }, {\n    key: \"_getStorageSession\",\n    value: function _getStorageSession() {\n      var result = null;\n      if (this._sessionStorage) {\n        result = this._sessionStorage.getSession();\n      }\n      return result;\n    }\n  }, {\n    key: \"_setStorageSession\",\n    value: function _setStorageSession() {\n      if (this._sessionStorage) {\n        this._sessionStorage.setSession(this.session);\n      }\n    }\n  }, {\n    key: \"_removeStorageSession\",\n    value: function _removeStorageSession() {\n      if (this._sessionStorage) {\n        this._sessionStorage.removeSession();\n      }\n    }\n  }, {\n    key: \"_manageStorageSession\",\n    value: function _manageStorageSession() {\n      if (this._connected) {\n        this._setStorageSession();\n      } else {\n        this._removeStorageSession();\n      }\n    }\n  }, {\n    key: \"_registerPushServer\",\n    value: function _registerPushServer(pushServerOpts) {\n      if (!pushServerOpts.url || typeof pushServerOpts.url !== \"string\") {\n        throw Error(\"Invalid or missing pushServerOpts.url parameter value\");\n      }\n      if (!pushServerOpts.type || typeof pushServerOpts.type !== \"string\") {\n        throw Error(\"Invalid or missing pushServerOpts.type parameter value\");\n      }\n      if (!pushServerOpts.token || typeof pushServerOpts.token !== \"string\") {\n        throw Error(\"Invalid or missing pushServerOpts.token parameter value\");\n      }\n      var pushSubscription = {\n        bridge: this.bridge,\n        topic: this.clientId,\n        type: pushServerOpts.type,\n        token: pushServerOpts.token,\n        peerName: \"\",\n        language: pushServerOpts.language || \"\"\n      };\n      this.on(\"connect\", /*#__PURE__*/function () {\n        var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee20(error, payload) {\n          var peerName, response, json;\n          return _regeneratorRuntime().wrap(function _callee20$(_context20) {\n            while (1) switch (_context20.prev = _context20.next) {\n              case 0:\n                if (!error) {\n                  _context20.next = 2;\n                  break;\n                }\n                throw error;\n              case 2:\n                if (pushServerOpts.peerMeta) {\n                  peerName = payload.params[0].peerMeta.name;\n                  pushSubscription.peerName = peerName;\n                }\n                _context20.prev = 3;\n                _context20.next = 6;\n                return fetch(\"\".concat(pushServerOpts.url, \"/new\"), {\n                  method: \"POST\",\n                  headers: {\n                    Accept: \"application/json\",\n                    \"Content-Type\": \"application/json\"\n                  },\n                  body: JSON.stringify(pushSubscription)\n                });\n              case 6:\n                response = _context20.sent;\n                _context20.next = 9;\n                return response.json();\n              case 9:\n                json = _context20.sent;\n                if (json.success) {\n                  _context20.next = 12;\n                  break;\n                }\n                throw Error(\"Failed to register in Push Server\");\n              case 12:\n                _context20.next = 17;\n                break;\n              case 14:\n                _context20.prev = 14;\n                _context20.t0 = _context20[\"catch\"](3);\n                throw Error(\"Failed to register in Push Server\");\n              case 17:\n              case \"end\":\n                return _context20.stop();\n            }\n          }, _callee20, null, [[3, 14]]);\n        }));\n        return function (_x24, _x25) {\n          return _ref2.apply(this, arguments);\n        };\n      }());\n    }\n  }]);\n  return Connector;\n}();\nexport default Connector;","map":{"version":3,"mappings":"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","names":["parsePersonalSign","parseTransactionData","convertArrayBufferToHex","convertHexToArrayBuffer","getClientMeta","payloadId","uuid","formatRpcError","parseWalletConnectUri","convertNumberToHex","isJsonRpcResponseSuccess","isJsonRpcResponseError","isSilentPayload","getLocal","signingMethods","mobileLinkChoiceKey","isMobile","removeLocal","SocketTransport","ERROR_SESSION_CONNECTED","ERROR_SESSION_DISCONNECTED","ERROR_SESSION_REJECTED","ERROR_MISSING_JSON_RPC","ERROR_MISSING_RESULT","ERROR_MISSING_ERROR","ERROR_MISSING_METHOD","ERROR_MISSING_ID","ERROR_INVALID_RESPONSE","ERROR_INVALID_URI","ERROR_MISSING_REQUIRED","ERROR_QRCODE_MODAL_NOT_PROVIDED","ERROR_QRCODE_MODAL_USER_CLOSED","EventManager","SessionStorage","getBridgeUrl","Connector","opts","_clientMeta","connectorOpts","clientMeta","_cryptoLib","cryptoLib","_sessionStorage","sessionStorage","storageId","_qrcodeModal","qrcodeModal","_qrcodeModalOptions","qrcodeModalOptions","_signingMethods","bridge","uri","session","Error","_getStorageSession","handshakeId","_subscribeToSessionResponse","_transport","transport","protocol","version","url","subscriptions","clientId","_subscribeToInternalEvents","_initTransport","_subscribeToSessionRequest","pushServerOpts","_registerPushServer","_bridge","value","_key","key","_clientId","_peerId","peerMeta","_peerMeta","_handshakeTopic","_handshakeId","_uri","_formatUri","_parseUri","handshakeTopic","chainId","_chainId","networkId","_networkId","accounts","_accounts","rpcUrl","_rpcUrl","_connected","connected","peerId","event","callback","eventEmitter","_eventManager","subscribe","unsubscribe","instantRequest","_generateKey","request","_formatRequest","method","params","id","trigger","on","endInstantRequest","killSession","_sendCallRequest","result","createSession","Promise","resolve","reject","error","payload","pending","_sendSessionRequest","topic","sessionStatus","sessionParams","approved","response","jsonrpc","_sendResponse","_setStorageSession","sessionError","message","_formatResponse","_removeStorageSession","_manageStorageSession","_sendRequest","_handleSessionDisconnect","tx","parsedTx","chainParams","options","_subscribeToResponse","formattedRequest","formattedResponse","close","callRequest","_encrypt","encryptionPayload","JSON","stringify","silent","forcePushNotification","send","errorMsg","_subscribeToCallResponse","baseResponse","errorResponse","successResponse","transportClose","socketMessage","activeTopics","includes","parse","_decrypt","_handleSessionResponse","open","mobileLinkUrl","window","location","href","code","toString","internalPayload","_handleIncomingMessages","encodeURIComponent","decodeURIComponent","generateKey","data","encrypt","decrypt","getSession","setSession","removeSession","type","token","pushSubscription","peerName","language","name","fetch","headers","Accept","body","json","success"],"sources":["../../src/index.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module","externalDependencies":[]}